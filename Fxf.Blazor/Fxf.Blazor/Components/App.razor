@using Fxf.Blazor.Components.Pages
@inject IThemeService theme
@inject IHttpContextAccessor httpContextAccessor
@inject ILanguageService languageService
@{
	string actualTheme = theme.CurrentTheme;
	string currentLanguage = "en";
	var context = httpContextAccessor?.HttpContext;
	if(context != null && context.Request.Cookies.ContainsKey("BlazorCulture"))
	{
		var cookieValue = context.Request.Cookies["BlazorCulture"];
		if(!string.IsNullOrWhiteSpace(cookieValue))
		{
			// Cookie format: c=cs|uic=cs
			var match = System.Text.RegularExpressions.Regex.Match(cookieValue, "([a-zA-Z-]+)");
			if(match.Success && match.Groups.Count > 1)
			{
				currentLanguage = match.Groups[1].Value.Split('-')[0];
			}
		}
	}
	bool isRtl = languageService.IsRtl(currentLanguage);
	string direction = isRtl ? "rtl" : "ltr";
}

<!DOCTYPE html>
<html lang="en" dir="@direction">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<base href="/" />
	<ResourcePreloader />
	<link rel="stylesheet" href="@Assets["lib/bootstrap/dist/css/bootstrap.min.css"]" />
	<link rel="stylesheet" href="@Assets[theme.CurrentThemeLink]" />
	<link rel="stylesheet" href="@Assets["Fxf.Blazor.styles.css"]" />
	<link rel="stylesheet" href="@Assets["main.css"]" />
	<link rel="stylesheet" href="@Assets["https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"]">
	<ImportMap />
	<link rel="icon" type="image/png" href="favicon.png" />
	<HeadOutlet />
	<!-- SignalR client library -->

</head>

<body>
	<Routes />
	<ReconnectModal />
	<script src="@Assets["js/site.js"]"></script>
	<script src="@Assets["lib/signalr/signalr.js"]"></script>
	<script src="@Assets["js/indexHubClient.js"]"></script>
	<script src="@Assets["_framework/blazor.web.js"]"></script>
	<script src="@Assets["Components/Account/Shared/PasskeySubmit.razor.js"]" type="module"></script>
</body>

</html>